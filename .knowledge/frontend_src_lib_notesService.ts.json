{"is_source_file": true, "format": "TypeScript", "description": "This file defines a NotesService module for managing notes, supporting CRUD operations via API or localStorage fallback. It includes type definitions for notes and create note inputs, helper functions for API checks and localStorage handling, and functions for listing, creating, updating, and deleting notes.", "external_files": ["fetch", "localStorage", "import.meta.env", "crypto"], "external_methods": ["fetch", "Date.prototype.toISOString", "console.log", "localStorage.getItem", "localStorage.setItem", "crypto.randomUUID"], "published": ["listNotes", "createNote", "updateNote", "deleteNote", "Note", "CreateNote"], "classes": [], "methods": [{"name": "export async function listNotes(): Promise<Note[]> { listNotes", "description": "Fetches all notes either from an external API if available or from localStorage.", "scope": "", "scopeKind": ""}, {"name": "export async function createNote(input: CreateNote): Promise<Note> { createNote", "description": "Creates a new note via API or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "export async function updateNote(id: string, input: CreateNote): Promise<Note> { updateNote", "description": "Updates an existing note via API or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteNote(id: string): Promise<void> { deleteNote", "description": "Deletes a note either via API or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "function createLocal(input: CreateNote): Note { createLocal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function deleteLocal(id: string): void { deleteLocal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function isApiAvailable(): boolean { isApiAvailable", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function listLocal(): Note[] { listLocal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function nowIso(): string { nowIso", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function readLocal(): Note[] { readLocal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function safeLog(...args: any[]) { safeLog", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function updateLocal(id: string, input: CreateNote): Note { updateLocal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function writeLocal(notes: Note[]) { writeLocal", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["isApiAvailable()", "fetch()", "safeLog()", "listLocal()", "createLocal()", "updateLocal()", "deleteLocal()"], "search-terms": ["notesService", "API_BASE", "localStorage", "Note", "listNotes", "createNote", "updateNote", "deleteNote"], "state": 2, "file_id": 7, "knowledge_revision": 15, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^const API_BASE =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "CreateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^type CreateNote = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^export type Note = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^const STORAGE_KEY = 'simple_notes_app_notes_v1';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "converted", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^      const converted: Note[] = Array.isArray(data)$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "createLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function createLocal(input: CreateNote): Note {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^export async function createNote(input: CreateNote): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "crypto", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const id = crypto?.randomUUID ? crypto.randomUUID() : `${Date.now()}-${Math.random()}`;$/", "language": "TypeScript", "kind": "constant", "scope": "createLocal", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^      const data = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "deleteLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function deleteLocal(id: string): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^export async function deleteNote(id: string): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "filtered", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const filtered = notes.filter((n) => n.id !== id);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteLocal", "scopeKind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const id = crypto?.randomUUID ? crypto.randomUUID() : `${Date.now()}-${Math.random()}`;$/", "language": "TypeScript", "kind": "constant", "scope": "createLocal", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^    ...notes[idx],$/", "language": "TypeScript", "kind": "constant", "scope": "updateLocal", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const idx = notes.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "updateLocal", "scopeKind": "function"}, {"_type": "tag", "name": "isApiAvailable", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function isApiAvailable(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function listLocal(): Note[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^export async function listNotes(): Promise<Note[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "lvl", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const lvl = (import.meta.env.PUBLIC_LOG_LEVEL as string | undefined)?.toLowerCase() || '';$/", "language": "TypeScript", "kind": "constant", "scope": "safeLog", "scopeKind": "function"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^      const n = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^      const n = await res.json();$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const note: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "createLocal", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const notes = readLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "createLocal", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const notes = readLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "deleteLocal", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const notes = readLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "listLocal", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const notes = readLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "updateLocal", "scopeKind": "function"}, {"_type": "tag", "name": "nowIso", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function nowIso(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^    const parsed = JSON.parse(raw);$/", "language": "TypeScript", "kind": "constant", "scope": "readLocal", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^    const raw = localStorage.getItem(STORAGE_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "readLocal", "scopeKind": "function"}, {"_type": "tag", "name": "readLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function readLocal(): Note[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^      const res = await fetch(`${API_BASE}\\/notes\\/${encodeURIComponent(id)}`, {$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^      const res = await fetch(`${API_BASE}\\/notes\\/${encodeURIComponent(id)}`, {$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^      const res = await fetch(`${API_BASE}\\/notes`, { credentials: 'include' });$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^      const res = await fetch(`${API_BASE}\\/notes`, {$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "safeLog", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function safeLog(...args: any[]) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^    title: input.title.trim(),$/", "language": "TypeScript", "kind": "constant", "scope": "createLocal", "scopeKind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^    title: input.title.trim(),$/", "language": "TypeScript", "kind": "constant", "scope": "updateLocal", "scopeKind": "function"}, {"_type": "tag", "name": "updateLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function updateLocal(id: string, input: CreateNote): Note {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^export async function updateNote(id: string, input: CreateNote): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^  const updated: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "updateLocal", "scopeKind": "function"}, {"_type": "tag", "name": "writeLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-221479-221488/frontend/src/lib/notesService.ts", "pattern": "/^function writeLocal(notes: Note[]) {$/", "language": "TypeScript", "kind": "function"}], "hash": "9613aedaaf185a084a53794e28360445", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/src/lib/notesService.ts", "revision_history": [{"15": ""}]}